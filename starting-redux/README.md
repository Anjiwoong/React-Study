# section 18

## 리덕스에 뛰어들기 (컨텍스트 API의 대안)

### 리덕스

리덕스는 크로스 컴포넌트 또는 앱 와이드 상태를 위한 상태 관리 시스템
상태, 즉 애플리케이션을 변경하고 화면에 표시하는 데이터를 관리하도록 도와준다. 리덕스는 우리가 그런 데이터를 다수의 컴포넌트나 심지어는 앱 전체에서 관리하도록 도와준다.

상태를 세 가지로 구분할 수 있다.

- 로컬 상태
  - 데이터가 변경되어서 하나의 컴포넌트에 속하는 UI에 영향을 미치는 상태
- 크로스 컴포넌트 상태
  - 하나의 컴포넌트가 아니라 다수의 컴포넌트에 영향을 미치는 상태
- 앱 와이드 상태
  - 다수의 컴포넌트가 아니라 애플리케이션의 모든 컴포넌트에 영향을 미치는 상태

### 리덕스 VS 리액트 컨텍스트

리액트 컨텍스트의 잠재적인 단점

- 설정이 아주 복잡해질 수 있고 리액트 컨텍스트를 이용한 상태 관리가 상당히 복잡해질 수 있다는 점
- 복잡성은 구축하는 애플리케이션의 종류에 따라 달라진다.
- 테마를 변경하거나 인증 같은 저빈도 업데이트에는 좋지만, 데이터가 자주 변경되는 경우에는 성능이 떨어진다.
- 유동적인 상태 확산을 대체할 수 없다.

### 리덕스의 작동 방식

리덕스는 애플리케이션에 있는 하나의 중앙 데이터 저장소. 데이터는 상태를 가리킨다.
**정확히 한 개의 저장소를 갖는다 절대 2개 이상은 갖지 않는다.**

저장소에 데이터를 저장해서 컴포넌트 안에서 사용할 수 있다.
예를 들면

- 사용자의 인증 상태가 변경되는 등 거기 있는 데이터가 변경되면 컴포넌트에서 인지해서 그에 맞춰 대응하고 UI를 업데이트하길 원한다.
- 이 컴포넌트를 위해 중앙 저장소에 대한 구독을 설정한다.
- 컴포넌트가 저장소를 구독하고 데이터가 변경될 때마다 저장소가 컴포넌트에 알려주게 되고 컴포넌트는 필요한 데이터를 받게 된다.

**저장된 데이터를 변경하는 방법**

- 컴포넌트는 절대로 중요하지 않고 절대로 저장된 데이터를 직접 조작하지 않는다.
- 그래서 구독을 하는 것이고 데이터는 절대로 반대 방향으로 흐르지 않는다.
- 리듀서라는 개념을 이용한다.
- 리듀서 함수
  - 리듀서 함수를 설정해야 하고 이 함수는 변형을 담당한다. 저장소 데이터를 변경하는 것을 담당
  - 여기서 리듀서 함수는 우리가 배운 useReducer훅과는 다르다.
  - 리듀서 함수는 입력을 받아서 그 입력을 변환하고 줄이는 함수

예를 들어 어떤 컴포넌트의 버튼을 클릭하면 데이터 변경을 트리거 하게 된다 그걸 어떻게 연결할까?

1. 액션이 있고 컴포넌트가 액션을 발송한다.
2. 리덕스는 그 액션을 리듀서로 전달하고 원하는 작업에 대한 설명을 읽게 된다.
3. 액션들을 리듀서로 전달해서 그 액션이 원하는 걸 리듀서가 하게 된다.
4. 리듀서는 새로운 상태를 뱉어내고 그게 실제로 중앙 데이터 저장소의 기존 상태를 대체하게 된다.
5. 데이터 저장소의 상태가 업데이트되면 구독 중인 컴포넌트가 알림을 받게 되고 컴포넌트는 UI를 업데이트 하게 된다.
